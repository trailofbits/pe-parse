language: cpp

os: linux # Jobs are on Linux unless specified otherwise
distr: trusty # Jobs are on Trusty unless specified otherwise

before_install:
- ./travis.sh "$TRAVIS_OS_NAME" initialize
script:
- ./travis.sh "$TRAVIS_OS_NAME" build

matrix:
  include:
  - env: COMPILER=clang++-5.0
    addons: { apt: { packages: ["clang-5.0"], sources: ["llvm-toolchain-trusty-5.0"] } }
  - env: COMPILER=gcc++-6
    addons: { apt: { packages: ["gcc++-6"] } }
  - os: osx
    osx_image: xcode9.1

env:
  global:
  - secure: "O+BGqz4ugoVIJbQTh0dJjKRrsSVzkCYSe0WpRzEWK3l8Mw7hqX300g81TxRwTzN2zfUsROMzaeGaXWfGzYakgW59K1WIioaczxtv2MzzUQTbqzJPa+qQoP9bk/b2wJ5jcOL965/rudRju4UiIwuIgzDAMN3nAfIEJgV/2zANLIg="

addons:
  coverity_scan:
    project:
      name: "trailofbits/pe-parse"
      description: "Principled, lightweight C/C++ PE parser"
    notification_email: dan@trailofbits.com
    build_command: "./travis.sh linux build"
    branch_pattern: master
