jobs:
  include:
    - stage: lint
      language: minimal
      dist: bionic
      addons:
        apt:
          packages:
            - clang-format
      script:
        - find . \( -name '*.h' \) -or \( -name '*.cpp' \) | xargs clang-format -i -style=file
        - git diff --exit-code
    - stage: build
      os:
        - linux
        - osx
      language: cpp
      compiler:
        - clang
        - gcc
      addons:
        homebrew:
          packages:
            - cmake
        apt:
          packages:
            - cmake
            - python2.7
            - python-dev
            - build-essential
            - realpath
            - libicu-dev
      script:
        - mkdir build && cd build
        - cmake ..
        - make
